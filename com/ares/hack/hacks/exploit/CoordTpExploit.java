package com.ares.hack.hacks.exploit;

import java.util.Iterator;
import com.ares.utils.chat.ChatUtils;
import com.ares.utils.Utils;
import net.minecraft.entity.player.EntityPlayer;
import com.ares.hack.settings.settings.EnumSetting;
import com.ares.hack.settings.Setting;
import net.minecraft.util.math.Vec3d;
import net.minecraft.entity.Entity;
import java.util.HashMap;
import com.ares.hack.categories.EnumCategory;
import com.ares.hack.hacks.BaseHack;

@Hack(name = "CoordTpExploit", description = "Will show you the new coords of any players within your render distance that tp", category = EnumCategory.EXPLOIT)
public class CoordTpExploit extends BaseHack
{
    private HashMap<Entity, Vec3d> knownPlayers;
    private HashMap<String, Vec3d> tpdPlayers;
    private int numTicks;
    private int numForgetTicks;
    private Setting<Publicity> publicity;
    
    public CoordTpExploit() {
        this.knownPlayers = new HashMap<Entity, Vec3d>();
        this.tpdPlayers = new HashMap<String, Vec3d>();
        this.numTicks = 0;
        this.numForgetTicks = 0;
        this.publicity = new EnumSetting<Publicity>("Mode", this, Publicity.PRIVATE);
    }
    
    public void onLogic() {
        /*SL:55*/if (!this.getEnabled()) {
            return;
        }
        /*SL:56*/if (this.numTicks >= 50) {
            /*SL:58*/this.numTicks = 0;
            /*SL:59*/for (final Entity v0 : CoordTpExploit.mc.field_71441_e.field_72996_f) {
                /*SL:61*/if (v0 instanceof EntityPlayer && !v0.func_70005_c_().equals(CoordTpExploit.mc.field_71439_g.func_70005_c_())) {
                    final Vec3d v = /*EL:64*/new Vec3d((double)(int)v0.field_70165_t, (double)(int)v0.field_70163_u, (double)(int)v0.field_70161_v);
                    /*SL:65*/if (this.knownPlayers.containsKey(v0)) {
                        /*SL:67*/if (Math.abs(this.knownPlayers.get(v0).func_72438_d(v)) > 50.0 && Math.abs(CoordTpExploit.mc.field_71439_g.func_174791_d().func_72438_d(v)) > 100.0 && (!this.tpdPlayers.containsKey(v0.func_70005_c_()) || this.tpdPlayers.get(v0.func_70005_c_()) != v)) {
                            /*SL:70*/if (this.publicity.getValue() == Publicity.PUBLIC) {
                                CoordTpExploit.mc.field_71439_g.func_71165_d(/*EL:72*/"Player " + v0.func_70005_c_() + " teleported to " + Utils.vectorToString(v, new boolean[0]));
                            }
                            else {
                                /*SL:76*/ChatUtils.printMessage("Player " + v0.func_70005_c_() + " teleported to " + Utils.vectorToString(v, new boolean[0]), "gold");
                            }
                            /*SL:79*/this.knownPlayers.remove(v0);
                            /*SL:80*/this.tpdPlayers.put(v0.func_70005_c_(), v);
                        }
                        /*SL:84*/this.knownPlayers.put(v0, v);
                    }
                    else {
                        /*SL:88*/this.knownPlayers.put(v0, v);
                    }
                }
            }
        }
        /*SL:93*/if (this.numForgetTicks >= 9000000) {
            /*SL:95*/this.tpdPlayers.clear();
        }
        /*SL:97*/++this.numTicks;
        /*SL:98*/++this.numForgetTicks;
    }
    
    enum Publicity
    {
        PRIVATE, 
        PUBLIC;
    }
}
