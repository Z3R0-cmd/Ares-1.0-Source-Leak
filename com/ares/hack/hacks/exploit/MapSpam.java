package com.ares.hack.hacks.exploit;

import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.inventory.ClickType;
import net.minecraft.network.play.client.CPacketPlayerTryUseItem;
import net.minecraft.util.EnumHand;
import net.minecraft.network.Packet;
import net.minecraft.network.play.client.CPacketHeldItemChange;
import com.ares.utils.chat.ChatUtils;
import net.minecraft.item.Item;
import com.ares.utils.WorldUtils;
import net.minecraft.init.Items;
import com.ares.utils.TimeUtils;
import com.ares.hack.settings.settings.number.DoubleSetting;
import java.time.Instant;
import com.ares.hack.settings.Setting;
import com.ares.hack.categories.EnumCategory;
import com.ares.hack.hacks.BaseHack;

@Hack(name = "Map Spam", description = "Spams maps in order to cause a map reset", category = EnumCategory.EXPLOIT)
public class MapSpam extends BaseHack
{
    private Setting<Double> delay;
    private Instant lastClicked;
    
    public MapSpam() {
        this.delay = new DoubleSetting("Delay", this, 1.0, 0.1, 4.0);
        this.lastClicked = Instant.EPOCH;
    }
    
    public void onLogic() {
        /*SL:31*/if (this.getEnabled() && /*EL:33*/TimeUtils.haveSecondsPassed(this.lastClicked, Instant.now(), Math.round(this.delay.getValue() * 1000.0))) {
            final int v0 = /*EL:35*/WorldUtils.findItem((Item)Items.field_151148_bJ);
            /*SL:37*/if (v0 == -1) {
                /*SL:39*/this.setEnabled(false);
                /*SL:40*/ChatUtils.printMessage("No empty maps in your hotbar :(");
                /*SL:41*/return;
            }
            MapSpam.mc.field_71439_g.field_71174_a.func_147297_a(/*EL:45*/(Packet)new CPacketHeldItemChange(v0));
            MapSpam.mc.field_71439_g.field_71071_by.field_70461_c = /*EL:46*/v0;
            MapSpam.mc.field_71439_g.field_71174_a.func_147297_a(/*EL:48*/(Packet)new CPacketPlayerTryUseItem(EnumHand.MAIN_HAND));
            /*SL:51*/for (int v = 0; v <= 44; ++v) {
                /*SL:53*/if (MapSpam.mc.field_71439_g.field_71069_bz.func_75139_a(v).func_75211_c().func_77973_b() == Items.field_151098_aY) {
                    MapSpam.mc.field_71442_b.func_187098_a(MapSpam.mc.field_71439_g.field_71070_bA.field_75152_c, /*EL:55*/v, 0, ClickType.THROW, (EntityPlayer)MapSpam.mc.field_71439_g);
                    MapSpam.mc.field_71439_g.field_71071_by.func_70304_b(/*EL:56*/v);
                }
            }
        }
    }
}
