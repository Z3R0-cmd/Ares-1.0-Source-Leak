package com.ares.hack.hacks.exploit;

import net.minecraft.util.math.BlockPos;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.network.Packet;
import net.minecraft.util.EnumFacing;
import net.minecraft.network.play.client.CPacketPlayerDigging;
import com.ares.Globals;
import net.minecraftforge.client.event.MouseEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraft.network.play.client.CPacketAnimation;
import com.ares.event.packet.PacketSent;
import com.ares.hack.settings.settings.EnumSetting;
import com.ares.hack.settings.Setting;
import com.ares.hack.categories.EnumCategory;
import com.ares.hack.hacks.BaseHack;

@Hack(name = "NoSwing", description = "Prevents the swing animation for others", category = EnumCategory.EXPLOIT)
public class NoSwing extends BaseHack
{
    private final Setting<Mode> mode;
    
    public NoSwing() {
        this.mode = new EnumSetting<Mode>("Mode", this, Mode.NO_ANIMATION);
    }
    
    @SubscribeEvent
    public void onPacket(final PacketSent a1) {
        /*SL:48*/if (this.getEnabled() && this.mode.getValue() == Mode.NO_ANIMATION && a1.packet instanceof CPacketAnimation) {
            /*SL:49*/a1.setCanceled(true);
        }
    }
    
    @SubscribeEvent
    public void onLeftClick(final MouseEvent v2) {
        /*SL:55*/if (!this.getEnabled() || this.mode.getValue() != Mode.PACKET_MINE) {
            return;
        }
        /*SL:57*/if (v2.getButton() == 0 && NoSwing.mc.field_71476_x.field_72308_g == null) {
            final BlockPos a1 = NoSwing.mc.field_71476_x.func_178782_a();
            /*SL:60*/Globals.getNetworkManager().func_179290_a((Packet)new CPacketPlayerDigging(CPacketPlayerDigging.Action.START_DESTROY_BLOCK, a1, EnumFacing.UP));
            /*SL:61*/Globals.getNetworkManager().func_179290_a((Packet)new CPacketPlayerDigging(CPacketPlayerDigging.Action.STOP_DESTROY_BLOCK, a1, EnumFacing.UP));
            /*SL:62*/v2.setCanceled(true);
        }
        /*SL:65*/if (v2.getButton() == 0 && NoSwing.mc.field_71476_x.field_72308_g != null) {
            NoSwing.mc.field_71442_b.func_78764_a((EntityPlayer)NoSwing.mc.field_71439_g, NoSwing.mc.field_71476_x.field_72308_g);
            /*SL:68*/v2.setCanceled(true);
        }
    }
    
    enum Mode
    {
        NO_ANIMATION, 
        PACKET_MINE;
    }
}
